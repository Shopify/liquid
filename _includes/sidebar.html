<div class="sidebar">
  <header class="sidebar__logo" role="banner">
    {% if page.home %}
      Liquid
    {% else %}
      <a href="{{ "/" | relative_url }}">Liquid</a>
    {% endif %}
  </header>

  {%- assign sections = "basics, tags, filters" | split: ", " -%}

  <nav class="sidebar__nav">
    <div class="sidebar__nav-interior">
      {%- for section in sections -%}
      {%- if section == "filters" -%}

        {%- assign categories = site[section] | map: "category" | uniq | sort -%}
        {%- for category in categories -%}
          {%- if category and category != "aaa" -%}
            {%- assign header = category | append: " " | append: section -%}
            {%- assign header_id = category | append: "-" | append: section -%}
          {%- else -%}
            {%- assign header = section -%}
            {%- assign header_id = section -%}
          {%- endif -%}
          {%- assign items = site[section] | where: "category", category | sort: "title" -%}
          {%- include sidebar-link.html -%}
        {%- endfor -%}

      {%- else -%}

        {%- assign header = section -%}
        {%- assign header_id = section -%}
        {%- assign items = site[section] -%}
        {%- include sidebar-link.html -%}

      {%- endif -%}
      {%- endfor -%}
    </div>

    {%- if sections contains page.collection -%}
      {%- assign element_id = page.collection -%}
      {%- if page.collection == "filters" and page.category and page.category != "aaa" -%}
        {%- assign element_id = page.category | append: "-" | append: page.collection -%}
      {%- endif -%}
    <script type="text/javascript">
        document.getElementById("{{ element_id }}").scrollIntoView();
    </script>
    {%- endif -%}
  </nav>
</div>